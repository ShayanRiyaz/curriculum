<!--title={Return Bike: Bill}-->

<!--badges={Python:30}-->

<!--concepts={Class Variable}-->

**When the request is valid**, then we can go ahead and calculate the bill.
First, we can replenish the shop's stock, with the number of bikes that we retrieve from customer.

`self.stock += numOfBikes`

Then, we can get the time elapsed between then and now.

```python
now = datetime.datetime.now()
rentalPeriod = now - rentalTime
```

`rentalPeriod` is a **timedelta** object. It represents a duration, difference between two dates or times.

We proceed with different cases with different calculation: 

We can get the hours that elapsed by simply doing unit converter with `timedelta.seconds`. There is no `hour` attribute for timedelta unfortunately.

`hour = rentalPeriod.seconds / 3600`

Then we times `hour` with the rate of rental, $5, and `numOfBikes`

In the same manner we calculate daily and weekly bill.

After we calculate the expense of the rental. We have to account for the customers' eligibility for the family deal! If the number of their rental is in between 3 and 5. Then they will have a 30% off on their total bill. So we have:

`bill = bill * 0.7`

Now the only thing left is to inform the customers of their bill.

Put them together, we have the following code.

```python
        self.stock += numOfBikes
        now = datetime.datetime.now()
        rentalPeriod = now - rentalTime
        # hourly bill calculation
        if rentalBasis == 1:
            bill = round(rentalPeriod.seconds / 3600) * 5 * numOfBikes
            
        # daily bill calculation
        elif rentalBasis == 2:
            bill = round(rentalPeriod.days) * 20 * numOfBikes
            
        # weekly bill calculation
        elif rentalBasis == 3:
            bill = round(rentalPeriod.days / 7) * 60 * numOfBikes
        
        if (3 <= numOfBikes <= 5):
            print("You are eligible for Family rental promotion of 30% discount")
            bill = bill * 0.7

        print("Thanks for returning your bike. Hope you enjoyed our service!")
        print("That would be ${}".format(bill))
        return bill    
```


â€‹               

